<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>1ì¼ 1ì¹­ì°¬</title>
  <style>
    :root {
      --accent: #f59e0b;
      --bg: #fff7ed;
      --card: #ffffff;
      --muted: #6b7280;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Noto Sans KR', sans-serif;
      background: var(--bg);
      color: #111;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      text-align: center;
    }
    h1 {
      font-size: 2.5rem;
      color: var(--accent);
      margin-bottom: 2rem;
    }
    .btn {
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-size: 1rem;
      transition: all 0.2s ease;
    }
    .btn-photo {
      background: #fff;
      color: var(--muted);
      border: 1px solid #ddd;
      padding: 10px 16px;
      margin-bottom: 1rem;
    }
    .btn-photo:hover { background: #fef3c7; }
    .btn-generate {
      background: var(--accent);
      color: #fff;
      font-weight: bold;
      padding: 14px 22px;
      font-size: 1.2rem;
    }
    .btn-generate:hover { background: #fbbf24; }

    #complimentPage {
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      text-align: center;
      background: var(--bg);
      padding: 20px;
    }

    #emoji {
      font-size: 3rem;
      margin-bottom: 1rem;
    }

    #complimentText {
      font-size: 1.4rem;
      margin-bottom: 1.5rem;
    }

    #photoPreview {
      max-width: 240px;
      border-radius: 12px;
      margin-top: 1rem;
      display: none;
    }
  </style>
</head>
<body>
  <section id="mainPage">
    <h1>1ì¼ 1ì¹­ì°¬</h1>
    <input type="file" id="photoInput" accept="image/*" style="display:none" onchange="previewPhoto(event)">
    <button class="btn btn-photo" onclick="document.getElementById('photoInput').click()">ğŸ“¸ ì‚¬ì§„ ì²¨ë¶€í•˜ê¸°</button>
    <br />
    <img id="photoPreview" />
    <br />
    <button class="btn btn-generate" onclick="generateCompliment()">ì¹­ì°¬ ìƒì„±í•˜ê¸°</button>
  </section>

  <section id="complimentPage">
    <div id="emoji">ğŸ˜Š</div>
    <div id="complimentText">ì˜¤ëŠ˜ë„ ë©‹ì ¸ìš”!</div>
    <button class="btn btn-generate" onclick="generateAnother()">í•˜ë‚˜ ë” ìƒì„±í•˜ê¸°</button>
  </section>

  <audio id="chimeSound" src="https://actions.google.com/sounds/v1/alarms/alarm_clock.ogg" preload="auto"></audio>

  <script>
    const compliments = [
      {text: 'ì˜¤ëŠ˜ë„ ìˆ˜ê³ í–ˆì–´ìš”!', emoji: 'ğŸŒ·'},
      {text: 'ë‹¹ì‹ ì€ ì¶©ë¶„íˆ ë©‹ì ¸ìš”!', emoji: 'ğŸŒˆ'},
      {text: 'ì¢‹ì€ í•˜ë£¨ ë³´ë‚´ìš” â˜€ï¸', emoji: 'â˜€ï¸'},
      {text: 'ë‹¹ì‹ ì˜ ì›ƒìŒì´ ìµœê³ ì˜ˆìš” ğŸ˜„', emoji: 'ğŸ˜„'},
      {text: 'ì˜¤ëŠ˜ì€ ì‰¬ì–´ë„ ê´œì°®ì•„ìš” ğŸ’†â€â™€ï¸', emoji: 'ğŸ’†â€â™€ï¸'},
      {text: 'ìŠ¤ìŠ¤ë¡œë¥¼ ì¹­ì°¬í•´ì£¼ì„¸ìš” ğŸ¥°', emoji: 'ğŸ¥°'},
      {text: 'ì‘ì€ ì¼ì—ë„ ë‹¹ì‹ ì€ ë¹›ë‚˜ìš” âœ¨', emoji: 'âœ¨'}
    ];

    const photoCompliments = {
      classroom: [
        {text: 'ì§‘ì— ê°€ì„œ ë§›ìˆëŠ” ê±° ë¨¹ì!', emoji: 'ğŸ±'},
        {text: 'ì˜¤ëŠ˜ ìˆ˜ì—…ë„ ì˜ ë²„í…¼ì–´ìš” ğŸ‘', emoji: 'ğŸ“š'}
      ],
      friends: [
        {text: 'ì¢‹ì€ ì¹œêµ¬ë“¤ê³¼ ìš°ì • ì˜ì›íˆ!', emoji: 'ğŸ¤'},
        {text: 'í•¨ê»˜ë¼ì„œ ë” ì¦ê±°ì›Œìš” ğŸ’–', emoji: 'ğŸ‰'}
      ]
    };

    let attachedPhoto = null;
    let currentCategory = null;

    function previewPhoto(event) {
      const file = event.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = function(e) {
        const img = document.getElementById('photoPreview');
        img.src = e.target.result;
        img.style.display = 'block';
        attachedPhoto = file;
      };
      reader.readAsDataURL(file);
    }

    function playChime() {
      const sound = document.getElementById('chimeSound');
      sound.currentTime = 0;
      sound.play();
    }

    function detectPhotoCategory() {
      if (!attachedPhoto) return null;
      const name = attachedPhoto.name.toLowerCase();
      if (name.includes('class') || name.includes('school')) return 'classroom';
      if (name.includes('friend')) return 'friends';
      return null;
    }

    function generateCompliment() {
      playChime();
      currentCategory = detectPhotoCategory();
      document.getElementById('mainPage').style.display = 'none';
      document.getElementById('complimentPage').style.display = 'flex';
      showRandomCompliment();
    }

    function generateAnother() {
      showRandomCompliment();
    }

    function showRandomCompliment() {
      let pool = compliments;
      if (currentCategory && photoCompliments[currentCategory]) {
        pool = photoCompliments[currentCategory];
      }
      const random = pool[Math.floor(Math.random() * pool.length)];
      document.getElementById('emoji').innerText = random.emoji;
      document.getElementById('complimentText').innerText = random.text;
    }
  </script>
</body>
</html>